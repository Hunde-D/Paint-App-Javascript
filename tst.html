<!DOCTYPE html>
<html>
<head>
    <!-- Adding the Fabric.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.5.0/fabric.min.js"></script>
</head>
<body>
<h2>Drawing a Line with Arrow Tip on a Fabric.js Canvas</h2>
<canvas id="canvas" width="600" height="600"></canvas>
<script>
    var canvas = new fabric.Canvas('canvas');

    // Function to create a line with an arrowhead
    function createLineWithArrow(startX, startY, endX, endY) {
        // Create a line
        var line = new fabric.Line([startX, startY, endX, endY], {
            stroke: 'red', // Line color
            strokeWidth: 5, // Line width
            selectable: false // Prevent line from being selected
        });

        // Calculate angle of the line
        var angle = Math.atan2(endY - startY, endX - startX) * 180 / Math.PI;

        // Create an arrowhead
        var arrow = new fabric.Triangle({
            left: endX, // Position at the end of the line
            top: endY,
            width: 20, // Arrowhead size
            height: 20,
            angle: angle + 90, // Rotate arrowhead to align with line
            fill: 'red' // Arrowhead color
        });

        // Group line and arrowhead together
        var group = new fabric.Group([line, arrow], {
            selectable: false // Prevent group from being selected
        });

        return group;
    }

    // Event listener for mouse down
    canvas.on('mouse:down', function(options) {
        var pointer = canvas.getPointer(options.e);
        var line = createLineWithArrow(pointer.x, pointer.y, pointer.x, pointer.y);
        canvas.add(line);
        canvas.setActiveObject(line);
    });

    // Event listener for mouse move
    canvas.on('mouse:move', function(options) {
        if (canvas.getActiveObject()) {
            var pointer = canvas.getPointer(options.e);
            var activeObject = canvas.getActiveObject();
            activeObject.item(0).set({ x2: pointer.x, y2: pointer.y });
            activeObject.item(1).set({ left: pointer.x, top: pointer.y });
            canvas.renderAll();
        }
    });

    // Event listener for mouse up
    canvas.on('mouse:up', function(options) {
        canvas.getActiveObject() && canvas.getActiveObject().setCoords();
    });

</script>
</body>
</html>
